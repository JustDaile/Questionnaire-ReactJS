(this["webpackJsonpquestionnaire-react"]=this["webpackJsonpquestionnaire-react"]||[]).push([[0],{81:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),i=n(8),s=n(16),o=n(17),c=n(14),u=n(19),l=n(18),p=n(0),h=n.n(p),d=n(27),j=n.n(d),f=n(59),b=n(52),O=n(44),x=n(15),v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,104)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))},m=n(31),g=n(13),k=n(11);function y(){return JSON.parse(localStorage.getItem("questionnaires"))||[]}function C(e){return JSON.parse(localStorage.getItem(e))||void 0}function q(e,t){localStorage.setItem(e,JSON.stringify(t));var n=y();n.includes(e)||(n.push(e),localStorage.setItem("questionnaires",JSON.stringify(n)))}function w(e){if("none"!==e){var t=y();t.includes(e)&&(t=t.filter((function(t){return t!==e})),localStorage.setItem("questionnaires",JSON.stringify(t))),localStorage.removeItem(e)}}n(81);var S=n(48),_=n.n(S),I=n(1),N=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(s.a)(this,n),r=t.call(this,e);var a=y();return r.state={onChange:e.onChange?e.onChange:function(){},defaultItem:a.length>0?a[0]:"none"},r.props.id||r.state.onChange(r.state.defaultItem,0),r}return Object(o.a)(n,[{key:"updateSelection",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#questionnaire_select"),n=t.selectedIndex,r=t.options[n].value,e.next=5,this.state.onChange(r,n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=y();return console.log("render selector with selected: ".concat(this.props.id)),Object(I.jsx)(k.a,{sm:"12",md:"5",lg:"3",className:"m-2 pl-4",children:Object(I.jsx)(m.a,{controlId:"floatingSelectGrid",label:"Questionnaire",children:Object(I.jsx)(g.a.Select,{size:"sm","aria-label":"Questionnaire selector",id:"questionnaire_select",onChange:function(){e.updateSelection()},value:this.props.id,children:t.map((function(e,t){var n=C(e);return n?Object(I.jsx)("option",{value:e,children:n.title?n.title:"untitled questionnaire"},t):Object(I.jsxs)("option",{children:["Deleted ",e]})}))})})})}}]),n}(h.a.Component),T=n(2),M=n(40),Q=n(24),D=n(29),E=n(33),L={MULT_CHOICE_CHECK:"multiple-choice-check",SINGLE_CHOICE_RADIO:"single-choice",SINGLE_CHOICE_SELECT:"single-choice-select"},H=L;function A(e){var t=e===L.MULT_CHOICE_CHECK?"checkbox":e===L.SINGLE_CHOICE_RADIO?"radio":e===L.SINGLE_CHOICE_SELECT?"select":e===L.MATHMATICAL_INPUT?"number":e===L.GRAMMATICAL_INPUT?"text":"error";if("error"===t)throw new Error("unknown question type '".concat(e,"' expected one of ").concat(JSON.stringify(Object.keys(L))));return t}n(87);var G=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"renderHeader",value:function(){return Object(I.jsx)("h3",{children:this.props.title})}},{key:"renderDetails",value:function(){return this.props.details}},{key:"renderOptionsContainer",value:function(){return Object(I.jsx)(g.a,{className:"question-options",children:this.renderOptions()})}},{key:"renderOptions",value:function(){var e=this,t=A(this.props.type);return"select"===t?Object(I.jsx)(g.a.Group,{as:x.a,xs:"auto",className:"question-option","data-q-index":this.props.index,children:this.renderSelect("choose an option: ")}):(this.props.options||[]).map((function(n,r){return e.renderInputOption(t,r)}))}},{key:"renderDefaultSelectOption",value:function(){return Object(I.jsx)("option",{value:"none",children:"select an option..."})}},{key:"renderSelectOption",value:function(e){return Object(I.jsx)("option",{value:e,children:this.props.options[e].text},"select_option_".concat(e))}},{key:"getSelectId",value:function(){return"option_select_".concat(this.props.index)}},{key:"getSelectClassName",value:function(){return"option-select"}},{key:"renderSelect",value:function(){var e=this;return Object(I.jsxs)(g.a.Select,{"aria-label":"option",id:this.getSelectId(),className:this.getSelectClassName(),children:[this.renderDefaultSelectOption(),this.props.options.map((function(t,n){return e.renderSelectOption(n)}))]})}},{key:"renderInput",value:function(e,t,n,r,a){return Object(I.jsx)(k.a,{sm:"10",children:Object(I.jsx)(g.a.Check,{label:r,type:e,name:t,value:n,"data-o-index":a,className:"option"})})}},{key:"renderInputOption",value:function(e,t){if(this.props.options[t])return Object(I.jsx)(g.a.Group,{className:"my-1",as:x.a,"data-q-index":this.props.index,id:"option_inputs_".concat(t),children:this.renderInput(e,"radio"===e?this.props.index:"option_".concat(t),this.props.options[t].correct,this.props.options[t].text,t)},"option_inputs_".concat(t))}},{key:"render",value:function(){return Object(I.jsx)(k.a,{style:{"--index":this.props.index},children:Object(I.jsxs)(E.a,{className:"question-card mb-3",children:[Object(I.jsx)(E.a.Header,{children:this.renderHeader()}),Object(I.jsx)(E.a.Text,{className:"question-details p-3 mb-0",children:this.renderDetails()}),Object(I.jsx)(E.a.Footer,{children:this.renderOptionsContainer()})]})},"question_".concat(this.props.index))}}]),n}(h.a.Component),F=(n(88),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"getTitle",value:function(){return this.props.questionnaire.title}},{key:"getQuestions",value:function(){return this.props.questionnaire.questions||[]}},{key:"renderTitle",value:function(){return Object(I.jsx)("h1",{children:this.getTitle()})}},{key:"renderQuestions",value:function(){var e=this;return this.getQuestions().map((function(t,n){return Object(I.jsx)(k.a,{xl:"4",lg:"6",sm:"12",className:"question",id:"question_".concat(n),children:e.renderQuestion(t,n)},"question_column_".concat(n))}))}},{key:"renderQuestion",value:function(e,t){return Object(I.jsx)(G,Object(T.a)({index:t},e),"question_".concat(t))}},{key:"render",value:function(){return Object(I.jsxs)(O.a,{fluid:!0,className:"questionnaire",children:[Object(I.jsx)(x.a,{className:"header",children:Object(I.jsx)(k.a,{className:"text-center",children:this.renderTitle()})}),Object(I.jsx)(x.a,{children:this.renderQuestions()})]})}}]),n}(h.a.Component)),R=n(58),J=n(60),P=n(74),B=n(37),V=(n(89),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={onChanged:e.onChanged?e.onChanged:function(){},onDelete:e.onDelete?e.onDelete:function(){}},r.onTitleChange=r.onTitleChange.bind(Object(c.a)(r)),r.onMarksChange=r.onMarksChange.bind(Object(c.a)(r)),r.onOptionChange=r.onOptionChange.bind(Object(c.a)(r)),r.onOptionSelect=r.onOptionSelect.bind(Object(c.a)(r)),r.onSelectCorrectOption=r.onSelectCorrectOption.bind(Object(c.a)(r)),r.onDetailsChange=r.onDetailsChange.bind(Object(c.a)(r)),r.onOptionTypeChange=r.onOptionTypeChange.bind(Object(c.a)(r)),r}return Object(o.a)(n,[{key:"update",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i,s,o,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]?c[3]:-1,s=document.querySelector("#".concat(t))[n],console.log("update option ".concat(i,".").concat(r," from ").concat(t," ").concat(n," === ").concat(s)),o=Object.assign({},this.props),i>=0?o.options[i][r]=s:o[r]=s,e.next=7,this.state.onChanged(o);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"populateInputWithValue",value:function(e){var t=document.querySelector("#".concat(e));t.value=t.placeholder}},{key:"addOption",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object.assign({},this.props)).options||(t.options=[]),t.options.push({text:null,correct:!1}),e.next=5,this.state.onChanged(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteOption",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(n=Object.assign({},this.props)).options[t],n.options=n.options.filter((function(e){return null!==e})),e.next=5,this.state.onChanged(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCorrectOptionIndexes",value:function(){return(this.props.options||[]).map((function(e,t){return!!e.correct&&t})).filter((function(e){return!1!==e}))}},{key:"onTitleChange",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object.assign({},this.props)).title=t.target.value,e.next=4,this.state.onChanged(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onMarksChange",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object.assign({},this.props)).marks=t.target.value,e.next=4,this.state.onChanged(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onOptionChange",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},this.props)).options[n].text=t.target.value,e.next=4,this.state.onChanged(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onDetailsChange",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object.assign({},this.props)).details=t.target.value,e.next=4,this.state.onChanged(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onOptionSelect",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object.assign({},this.props)).options.forEach((function(e,n){var r=document.querySelector("#question_".concat(t.index,"_option_").concat(n));e.correct=!1,r.checked&&(e.correct=!0)})),e.next=4,this.state.onChanged(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSelectCorrectOption",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#option_select_".concat(this.props.index)),n=t.options[t.selectedIndex].value,(r=Object.assign({},this.props)).options.forEach((function(e,t){e.correct=!1,t===parseInt(n)&&(e.correct=!0)})),e.next=6,this.state.onChanged(r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCorrectInputOptions",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object.assign({},this.props)).options.forEach((function(e,n){var r=document.querySelector("#question_".concat(t.index,"_option_").concat(n));e.correct=!1,r.checked&&(e.correct=!0)})),e.next=4,this.state.onChanged(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onOptionTypeChange",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object.assign({},this.props)).type=t.target.value,e.next=4,this.state.onChanged(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderHeader",value:function(){var e=this,t="question_".concat(this.props.index,"_header"),n=Object(I.jsxs)(B.a,{id:"".concat(t,"_popover"),children:[Object(I.jsx)(B.a.Header,{as:"h3",children:"Delete this question?"}),Object(I.jsxs)(B.a.Body,{children:[Object(I.jsx)(D.a,{variant:"danger",className:"m-1",onClick:Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onDelete(e.props.index);case 2:case"end":return t.stop()}}),t)}))),children:"Accept"}),Object(I.jsx)(D.a,{className:"m-1",onClick:function(){return document.body.click()},children:"Cancel"})]})]});return Object(I.jsxs)(g.a.Group,{as:x.a,children:[Object(I.jsx)(k.a,{md:"11",children:Object(I.jsx)(m.a,{controlId:t,label:"Question Title",children:Object(I.jsx)(g.a.Control,{className:"questionTitle",id:t,type:"text",placeholder:"question title",onChange:this.onTitleChange,value:this.props.title?this.props.title:"",autoComplete:"off"})})}),Object(I.jsx)(k.a,{className:"align-self-center p-0",children:Object(I.jsx)(P.a,{trigger:"click",placement:"left",overlay:n,rootClose:!0,children:Object(I.jsx)(R.a,{})})})]})}},{key:"renderDetails",value:function(){var e="question_".concat(this.props.index,"_details");return Object(I.jsx)(m.a,{controlId:e,label:"Question Details",children:Object(I.jsx)(g.a.Control,{as:"textarea",id:e,className:"question-details",style:{height:"100px"},onChange:this.onDetailsChange,placeholder:"question details here..",value:this.props.details?this.props.details:""})})}},{key:"renderOptions",value:function(){var e=this;console.log("rendering options of type ".concat(this.props.type));var t=A(this.props.type),n="question_".concat(this.props.index,"_marks"),r="question_".concat(this.props.index,"_type_selector");console.log("rendering options ".concat(t));var s="select"===t?Object(I.jsx)("div",{className:"option","data-q-index":this.props.index,children:this.renderSelect()}):(this.props.options||[]).map((function(n,r){return console.log("rendering input option ".concat(r," type ").concat(t," for question ").concat(e.props.index)),e.renderInputOption(t,r)}));return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(g.a.Group,{id:"optionTypeSelector",as:x.a,className:"mb-4",children:Object(I.jsx)(k.a,{md:"12",children:Object(I.jsx)(m.a,{controlId:r,label:"Option Type",children:Object(I.jsx)(g.a.Select,{"aria-label":"Questionnaire type selector",size:"sm",id:r,value:this.props.type,onChange:this.onOptionTypeChange,children:Object.keys(H).map((function(e,t){return Object(I.jsx)("option",{value:H[e],children:e},"".concat(r,"_option_").concat(t))}))})})})}),s,Object(I.jsxs)(g.a.Group,{as:x.a,className:"mb-2 mt-4 justify-content-between",children:[Object(I.jsx)(k.a,{sm:"12",md:"6",children:Object(I.jsxs)(J.a,{children:[Object(I.jsx)(J.a.Text,{children:"Marks"}),Object(I.jsx)(g.a.Control,{className:"marks",id:n,type:"number",placeholder:"total marks",min:1,max:100,name:"marks",autoComplete:"off",onChange:this.onMarksChange,value:this.props.marks?this.props.marks:""})]})}),Object(I.jsx)(k.a,{sm:"12",md:"5",children:Object(I.jsx)(D.a,{className:"w-100",onClick:Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addOption();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:"Add Option"})})]})]})}},{key:"renderInput",value:function(e,t,n,r,s){var o=this,c="question_".concat(this.props.index,"_option_").concat(s),u=Object(I.jsxs)(B.a,{id:"".concat(c,"_popover"),children:[Object(I.jsx)(B.a.Header,{as:"h3",children:"Delete this option?"}),Object(I.jsxs)(B.a.Body,{children:[Object(I.jsx)(D.a,{className:"m-1",onClick:Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.deleteOption(s);case 2:case"end":return e.stop()}}),e)}))),children:"Accept"}),Object(I.jsx)(D.a,{className:"m-1",onClick:function(){return document.body.click()},children:"Cancel"})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(k.a,{children:Object(I.jsxs)(J.a,{children:[Object(I.jsx)(J.a.Text,{children:Object(I.jsx)(P.a,{trigger:"click",placement:"right",overlay:u,rootClose:!0,children:Object(I.jsx)(R.a,{})})}),Object(I.jsx)(g.a.Control,{className:"option_text",type:"text",placeholder:"option..",onChange:function(e){o.onOptionChange(e,s)},autoComplete:"off",value:this.props.options[s].text?this.props.options[s].text:""})]})}),Object(I.jsx)(k.a,{sm:"4",className:"align-self-center",children:Object(I.jsx)(g.a.Check,{label:!0===n?"correct":"incorrect",id:c,onChange:this.onOptionSelect,type:e,name:t,checked:!0===n,"data-o-index":this.props.index})})]})}},{key:"renderSelect",value:function(){var e=this;return Object(I.jsxs)(g.a.Select,{id:this.getSelectId(),onChange:this.onSelectCorrectOption,value:this.getCorrectOptionIndexes()[0],children:[Object(M.a)(Object(Q.a)(n.prototype),"renderDefaultSelectOption",this).call(this),(this.props.options||[]).map((function(t,r){return Object(M.a)(Object(Q.a)(n.prototype),"renderSelectOption",e).call(e,r)}))]})}}]),n}(G)),U=(n(91),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={onChange:e.onChange?e.onChange:function(){}},r.onTitleChange=r.onTitleChange.bind(Object(c.a)(r)),r}return Object(o.a)(n,[{key:"onTitleChange",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object.assign({},this.props)).questionnaire.title=t.target.value,e.next=4,this.state.onChange(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onQuestionChange",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,o,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.index,r=t.title,i=t.details,s=t.options,o=t.type,c=t.marks,u=Object.assign({},this.props),console.log({index:n,title:r,details:i,options:s,type:o,marks:c}),u.questionnaire.questions[n]={title:r,details:i,options:s,type:o,marks:c},e.next=6,this.state.onChange(u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addQuestion",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object.assign({},this.props)).questionnaire.questions||(t.questionnaire.questions=[]),t.questionnaire.questions.push({type:H.SINGLE_CHOICE_RADIO,marks:5}),e.next=5,this.state.onChange(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteQuestion",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object.assign({},this.props)).questionnaire.questions=n.questionnaire.questions.filter((function(e,n){return n!==t})),e.next=4,this.state.onChange(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderTitle",value:function(){var e=this.props.titlePlaceholder?this.props.titlePlaceholder:"Enter a title";return Object(I.jsx)(m.a,{controlId:"title-input",label:"Questionnaire Title",children:Object(I.jsx)(g.a.Control,{id:"title-input",className:"editable-text text-center my-5",type:"text",placeholder:e,onChange:this.onTitleChange,autoComplete:"off",value:this.props.questionnaire.title?this.props.questionnaire.title:""})})}},{key:"renderQuestions",value:function(){var e=this;return Object(I.jsxs)(I.Fragment,{children:[Object(M.a)(Object(Q.a)(n.prototype),"renderQuestions",this).call(this),Object(I.jsx)(x.a,{className:"justify-content-md-center",children:Object(I.jsx)("div",{id:"controls",children:Object(I.jsx)(D.a,{onClick:Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addQuestion();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:"Add new question"})})})]})}},{key:"renderQuestion",value:function(e,t){var n=this;return Object(I.jsx)(V,Object(T.a)(Object(T.a)({index:t},e),{},{onChanged:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.onQuestionChange(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onDelete:Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.deleteQuestion(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}),t)}}]),n}(F)),Y=n(51);var z=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},W=(n(92),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={options:r.props.options?z(r.props.options):[],onMarked:r.props.onMarked?r.props.onMarked:Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))},r}return Object(o.a)(n,[{key:"checkSelectValid",value:function(){try{var e=document.querySelector("#".concat(this.getSelectId())).value;return this.getOption(e).correct?{isValid:!0,disabled:"disabled"}:{isInvalid:!0,disabled:"disabled"}}catch(t){}return{isInvalid:!0,disabled:"disabled"}}},{key:"checkInputValid",value:function(e){var t=document.querySelector("#question_".concat(this.props.index,"_option_").concat(e,"_input")).checked,n=this.getOption(e).correct;return t&&n?{isValid:!0,disabled:!0}:t&&!n?{isInvalid:!0,disabled:!0}:{disabled:!0}}},{key:"calculateMarks",value:function(e){var t=this;console.log("calculating marks");var n=!0;if("select"!==e)this.props.options.forEach((function(e,r){var a=document.querySelector("#question_".concat(t.props.index,"_option_").concat(r,"_input"));if(a){var i=a.checked;(i&&!e.correct||!i&&e.correct)&&(n=!1)}else n=!1})),this.state.onMarked(this.props.index,n);else try{var r=document.querySelector("#".concat(this.getSelectId())).value;this.state.onMarked(this.props.index,!!this.getOption(r)&&this.getOption(r).correct)}catch(a){}}},{key:"getOption",value:function(e){return this.state.options[e]}},{key:"renderHeader",value:function(){return Object(I.jsx)("h5",{children:this.props.title?this.props.title:"unnamed question"})}},{key:"renderDetails",value:function(){return this.props.details?this.props.details:"no details specified"}},{key:"renderOptionsContainer",value:function(){return Object(I.jsx)(g.a,{className:"question-options",children:this.renderOptions()})}},{key:"renderOptions",value:function(){var e=this,t=A(this.props.type);return this.state.options.length<1?Object(I.jsx)("h5",{children:"no options"}):"select"===t?Object(I.jsx)(g.a.Group,{as:x.a,xs:"auto",className:"question-option","data-q-index":this.props.index,children:this.renderSelect("choose an option: ")}):(this.state.options||[]).map((function(n,r){return e.renderInputOption(t,r)}))}},{key:"renderDefaultSelectOption",value:function(){return Object(I.jsx)("option",{value:"none",children:"select an option..."})}},{key:"renderSelectOption",value:function(e){return Object(I.jsx)("option",{value:e,children:this.getOption(e).text},"select_option_".concat(e))}},{key:"getSelectId",value:function(){return"option_select_".concat(this.props.index)}},{key:"getSelectClassName",value:function(){return"option-select"}},{key:"renderSelect",value:function(){var e=this;return Object(I.jsxs)(g.a.Select,Object(T.a)(Object(T.a)({"aria-label":"option",id:this.getSelectId(),className:this.getSelectClassName()},this.props.show?this.checkSelectValid():""),{},{onChange:function(){return e.calculateMarks("select")},children:[this.renderDefaultSelectOption(),this.state.options.map((function(t,n){return e.renderSelectOption(n)}))]}))}},{key:"renderInput",value:function(e,t,n,r,a){var i=this;return Object(I.jsx)(k.a,{sm:"10",children:Object(I.jsx)(g.a.Check,Object(T.a)(Object(T.a)({id:"question_".concat(this.props.index,"_option_").concat(a,"_input"),label:r,type:e,name:t,value:n,"data-o-index":a,className:"option"},this.props.show?this.checkInputValid(a):""),{},{onChange:function(){return i.calculateMarks()}}))})}},{key:"renderInputOption",value:function(e,t){if(this.getOption(t))return Object(I.jsx)(g.a.Group,{className:"my-1",as:x.a,"data-q-index":this.props.index,id:"option_inputs_".concat(t),children:this.renderInput(e,"radio"===e?this.props.index:"option_".concat(t),this.getOption(t).correct,this.getOption(t).text,t)},"option_inputs_".concat(t))}},{key:"render",value:function(){return Object(I.jsx)(k.a,{style:{"--index":this.props.index},children:Object(I.jsxs)(E.a,{className:"question-card mb-3",children:[Object(I.jsx)(E.a.Header,{children:this.renderHeader()}),Object(I.jsx)(E.a.Text,{className:"question-details p-3 mb-0",children:this.renderDetails()}),Object(I.jsx)(E.a.Footer,{children:this.renderOptionsContainer()})]})},"question_".concat(this.props.index))}}]),n}(G)),K=(n(93),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={show:!1,showResultModal:!1},e.questionnaire.questions&&(r.marked=new Array(e.questionnaire.questions.length).fill(0)),r.onComplete=r.onComplete.bind(Object(c.a)(r)),r.onQuestionMarked=r.onQuestionMarked.bind(Object(c.a)(r)),r}return Object(o.a)(n,[{key:"onComplete",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({show:!0,showResultModal:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onQuestionMarked",value:function(e,t){this.marked[e]=t?parseInt(this.props.questionnaire.questions[e].marks):0,console.log(this.marked)}},{key:"renderTitle",value:function(){return Object(I.jsx)("h1",{className:"m-5",children:this.props.questionnaire.title})}},{key:"renderQuestions",value:function(){var e=this;return(this.props.questionnaire.questions||[]).map((function(t,n){return Object(I.jsx)(k.a,{sm:"12",className:"question",id:"question_".concat(n),children:e.renderQuestion(t,n)},"question_column_".concat(n))}))}},{key:"renderQuestion",value:function(e,t){return Object(I.jsx)(W,Object(T.a)(Object(T.a)({index:t},e),{},{show:this.state.show,onMarked:this.onQuestionMarked}),"question_".concat(t))}},{key:"renderModal",value:function(){var e=this;return Object(I.jsxs)(Y.a,{show:this.state.showResultModal,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(I.jsx)(Y.a.Header,{closeButton:!0,children:Object(I.jsxs)(Y.a.Title,{id:"contained-modal-title-vcenter",children:[this.getTitle()," Complete"]})}),Object(I.jsxs)(Y.a.Body,{children:[Object(I.jsx)("h4",{children:"Your results"}),Object(I.jsxs)("p",{children:["You scored"," ",this.marked.map((function(e){return e||0})).reduce((function(e,t){return e+t}))," out of"," ",this.props.questionnaire.questions.map((function(e){return parseInt(e.marks)})).reduce((function(e,t){return e+t}))]})]}),Object(I.jsx)(Y.a.Footer,{children:Object(I.jsx)(D.a,{onClick:function(){return e.setState({showResultModal:!1})},children:"Close"})})]})}},{key:"render",value:function(){var e=this;return Object(I.jsxs)(O.a,{fluid:!0,className:"questionnaire",children:[Object(I.jsx)(x.a,{className:"header",children:Object(I.jsx)(k.a,{className:"text-center",children:this.renderTitle()})}),Object(I.jsx)(x.a,{children:this.renderQuestions()}),Object(I.jsx)(x.a,{className:"mt-1 mb-3",children:Object(I.jsxs)(k.a,{md:{offset:10,span:1},children:[Object(I.jsx)(D.a,{onClick:Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onComplete();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:this.state.show?"Results":"Complete"}),this.renderModal(this.state.showResultModal)]})})]})}}]),n}(F)),X=(n(94),n(95),{title:"Example Questionnaire",questions:[{title:"1.",details:"What is the capital of England?",options:[{text:"London",correct:!0},{text:"Birmingham",correct:!1},{text:"Manchester",correct:!1},{text:"Yorkshire",correct:!1}],type:"single-choice",marks:"8"},{title:"2.",details:"What came first? ",options:[{text:"Chicken",correct:!1},{text:"Egg",correct:!1},{text:"Proto-Chicken",correct:!0}],type:"single-choice",marks:"10"},{title:"3.",details:"Is climate change an issue?",options:[{text:"yes",correct:!0},{text:"no",correct:!1}],type:"single-choice-select",marks:"15"},{title:"4.",details:"Dark is the absents of what?",options:[{text:"Light",correct:!0},{text:"The sun",correct:!1},{text:"Day",correct:!1},{text:"Love",correct:!1}],type:"multiple-choice-check",marks:5},{title:"5.",details:"Yesterday is the past. Today is the present. Tomorrow is what?",options:[{text:"The future",correct:!0},{text:"The end",correct:!1},{text:"Tuesday",correct:!1}],type:"multiple-choice-check",marks:5}]}),Z="EDIT",$="COMPLETE",ee=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={id:void 0,pageState:Z,questionnaire:{}},r.onQuestionnaireChange=r.onQuestionnaireChange.bind(Object(c.a)(r)),r.onSelectedChange=r.onSelectedChange.bind(Object(c.a)(r)),r.new=r.new.bind(Object(c.a)(r)),r.download=r.download.bind(Object(c.a)(r)),r.toggleComplete=r.toggleComplete.bind(Object(c.a)(r)),r.delete=r.delete.bind(Object(c.a)(r)),r}return Object(o.a)(n,[{key:"onQuestionnaireChange",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("changed questionnaire: ".concat(JSON.stringify(t.questionnaire))),q(this.state.id,this.state.questionnaire),e.next=4,this.setState({id:this.state.id,questionnaire:t.questionnaire});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSelectedChange",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("selection changed: ".concat(t)),r=(n="none"!==t)?t:_()(),e.next=5,this.setState({id:r,questionnaire:n?C(r):{title:"",questions:[]}});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"new",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(t=_()(),n={}),e.next=5,this.setState({id:t,questionnaire:n},(function(){console.log(r.state)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"download",value:function(){var e=C(this.state.id);if(e.title){var t=document.querySelector("#download");t&&(t.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(e)))),t.setAttribute("download","".concat(e.title.replaceAll(" ","-"),".json")))}else alert("unable to load questionnaire with id: ".concat(this.state.id))}},{key:"toggleComplete",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.pageState===$){e.next=4;break}return e.next=3,this.setState({pageState:$});case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,this.setState({pageState:Z});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==this.state.id){e.next=2;break}return e.abrupt("return");case 2:if(w(this.state.id),0!==(t=y()).length){e.next=10;break}return n=_()(),q(_()(),X),e.next=9,this.setState({id:n,questionnaire:X});case 9:return e.abrupt("return",e.sent);case 10:return e.next=12,this.setState({id:t[0],questionnaire:C(t[0])});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderPageState",value:function(){var e,t=this;switch(console.log("render page state"),this.state.pageState){case $:e=Object(I.jsx)(K,{questionnaire:this.state.questionnaire});break;case Z:e=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(x.a,{className:"justify-content-end",children:Object(I.jsx)(N,{id:this.state.id,onChange:function(){var e=Object(i.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onSelectedChange(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),selected:this.state.questionnaire.title})}),Object(I.jsx)(U,{questionnaire:this.state.questionnaire,onChange:function(){var e=Object(i.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.onQuestionnaireChange(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]});break;default:e=Object(I.jsxs)("h2",{children:["Unhandled state: ",this.state.pageState]})}return e}},{key:"render",value:function(){var e=this;return console.log("render main"),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(f.a,{expand:"md",bg:"dark",variant:"dark",children:Object(I.jsxs)(O.a,{children:[Object(I.jsx)(f.a.Brand,{children:"Questionnaires ReactJS"}),Object(I.jsx)(f.a.Toggle,{"aria-controls":"collapse-nav"}),Object(I.jsx)(f.a.Collapse,{id:"collapse-nav",children:Object(I.jsxs)(b.a,{className:"me-auto",children:[Object(I.jsx)(b.a.Link,{onClick:Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.new();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),disabled:this.state.pageState!==Z,children:"New"}),Object(I.jsx)(b.a.Link,{onClick:this.toggleComplete,className:this.state.pageState===$?"active":"",disabled:!this.state.questionnaire.title||!this.state.questionnaire.questions,children:this.state.pageState===$?"Edit":"Complete"}),Object(I.jsx)(b.a.Link,{href:"download",id:"download",className:"undecorated",onClick:function(t){return e.download(t)},disabled:this.state.pageState!==Z,children:"Download"}),Object(I.jsx)(b.a.Link,{onClick:this.delete,disabled:this.state.pageState!==Z,children:"Delete"})]})})]})}),this.renderPageState()]})}}]),n}(h.a.Component);j.a.render(Object(I.jsx)(h.a.StrictMode,{children:Object(I.jsx)(ee,{})}),document.getElementById("root")),v()}},[[98,1,2]]]);
//# sourceMappingURL=main.27f76d1b.chunk.js.map